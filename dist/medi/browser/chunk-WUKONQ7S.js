import{a as P}from"./chunk-UGHOCL4S.js";import{a as j,b as V}from"./chunk-O6FYGH4Z.js";import"./chunk-XAZLOLJU.js";import{$a as W,Aa as w,Ba as O,Fa as A,Ga as R,H as k,Ha as N,I as B,Ja as l,Ka as F,L as v,Na as f,O as u,P as D,Ua as L,V as T,W as M,_ as E,cb as y,d as p,fa as h,h as q,oa as I,ob as Q,pa as b,sb as C,va as a,wa as s,xa as m,za as _}from"./chunk-32OPWHZX.js";var H=(()=>{class r{constructor(){this.onAddEvent=new E}onAddToggle(){this.onAddEvent.emit()}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=u({type:r,selectors:[["app-schedules-header"]],outputs:{onAddEvent:"onAddEvent"},standalone:!0,features:[f],decls:10,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"h3",2),l(3,"Citas - Listado"),s(),a(4,"div",3)(5,"a",4),l(6,"Lista"),s(),a(7,"span"),l(8," - Citas"),s()()(),m(9,"div",5),s())},dependencies:[y],encapsulation:2,changeDetection:0})}}return r})();var ie=["schedule-item",""],J=(()=>{class r{static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=u({type:r,selectors:[["","schedule-item",""]],inputs:{appointment:"appointment"},standalone:!0,features:[f],attrs:ie,decls:16,vars:4,consts:[[1,"py-3","pl-3","text-start"],[1,"pr-1"],[1,"text-sm","text-muted-foreground"],[1,"py-3","pl-3","text-right"]],template:function(e,i){if(e&1&&(a(0,"td",0)(1,"div",1)(2,"span",2),l(3),s()()(),a(4,"td",0)(5,"div",1)(6,"span",2),l(7),s()()(),a(8,"td",0)(9,"div",1)(10,"span",2),l(11),s()()(),a(12,"td",3)(13,"div",1)(14,"span",2),l(15),s()()()),e&2){let o;h(3),F(i.appointment.appointmentDate),h(4),F((o=i.appointment.doctorShedule.start_time)!==null&&o!==void 0?o:i.appointment.doctorShedule.startTime),h(4),F(i.appointment.patient.user.fullName),h(4),F(i.appointment.status)}},dependencies:[y],encapsulation:2,changeDetection:0})}}return r})();function oe(r,n){if(r&1){let t=_();a(0,"tr",10),w("click",function(){let i=T(t).$implicit,o=O();return M(o.onSelectTable(i))}),s()}if(r&2){let t=n.$implicit;b("appointment",t)}}var z=(()=>{class r{constructor(){this.onItemSelected=new E}onSelectTable(t){this.onItemSelected.emit(t)}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=u({type:r,selectors:[["app-schedule-list-items"]],inputs:{appointments:"appointments"},outputs:{onItemSelected:"onItemSelected"},standalone:!0,features:[f],decls:19,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-xs","text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-3","text-left"],[1,"py-3","text-right"],["schedule-item","","class","border-b border-dashed border-border hover:bg-card",3,"appointment","click",4,"ngFor","ngForOf"],["schedule-item","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","appointment"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),l(4,"Lista de Citas"),s()()(),a(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),l(10,"Fecha"),s(),a(11,"th",7),l(12,"Hora"),s(),a(13,"th",7),l(14,"Paciente"),s(),a(15,"th",8),l(16,"Status"),s()()(),a(17,"tbody"),I(18,oe,1,1,"tr",9),s()()()()),e&2&&(h(18),b("ngForOf",i.appointments))},dependencies:[y,W,J],encapsulation:2,changeDetection:0})}}return r})();var G=(()=>{class r{close(){this.detailListener.close()}onSubmit(){}onDelete(){this.detailListener.delete(this.appointment.id)}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=u({type:r,selectors:[["app-schedule-detail"]],inputs:{appointment:"appointment",detailListener:"detailListener"},standalone:!0,features:[f],decls:45,vars:2,consts:[[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],[1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex"],[1,"text-xs","text-muted-foreground"],[1,"text-base","text-foreground"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),l(4),s(),a(5,"button",4),w("click",function(){return i.close()}),l(6," X "),s()(),m(7,"hr",5),s(),a(8,"div",6)(9,"div",7)(10,"span",8),l(11,"Paciente"),s(),a(12,"span",9),l(13),s()()(),m(14,"hr",5),a(15,"div",6)(16,"div",7)(17,"span",8),l(18,"Cantidad de cupos"),s()()(),m(19,"hr",5),a(20,"div",6)(21,"div",7)(22,"span",8),l(23,"Hora inicial"),s()()(),m(24,"hr",5),a(25,"div",6)(26,"div",7)(27,"span",8),l(28,"Hora final"),s()()(),m(29,"hr",5),a(30,"div",6)(31,"div",7)(32,"span",8),l(33,"Doctor"),s()()(),m(34,"hr",5),a(35,"div",6)(36,"div",7)(37,"span",8),l(38,"Especialidad"),s()()(),m(39,"hr",5),a(40,"div",6)(41,"div",7)(42,"span",8),l(43,"Consultorio"),s()()(),m(44,"hr",5),s()),e&2&&(h(4),F("Cita: "+i.appointment.id),h(9),F(i.appointment.patient.user.fullName))},dependencies:[y],encapsulation:2,changeDetection:0})}}return r})();var $={production:!0,api_url:"https://8a6b-179-60-117-159.ngrok-free.app/graphql"};var x=class{constructor(){this.query=""}static fetchQuery(n,t){return p(this,null,function*(){let i=yield(yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})})).json();if(i.errors)throw new Error(`GraphQL Error: ${JSON.stringify(i.errors)}`);return i.data})}setRootType(n){return this.query+=`${n} {
`,this}addFieldWithArgs(n,t){let e=o=>typeof o=="string"?`"${o}"`:typeof o=="object"&&!Array.isArray(o)?`{ ${Object.entries(o).map(([d,c])=>`${d}: ${e(c)}`).join(", ")} }`:`${o}`,i=Object.entries(t).map(([o,d])=>`${o}: ${e(d)}`).join(", ");return this.query+=`  ${n}(${i}) {
`,this}addFunctionWithArgs(n,t){let e=o=>typeof o=="string"?`${o}`:typeof o=="object"&&!Array.isArray(o)?`{ ${Object.entries(o).map(([d,c])=>`${d}: ${e(c)}`).join(", ")} }`:`${o}`,i=Object.entries(t).map(([o,d])=>`${o}: ${e(d)}`).join(", ");return this.query+=`  ${n}(${i}) {
`,this}openBlock(n){return this.query+=`    ${n} {
`,this}addField(n){return this.query+=`      ${n}
`,this}closeBlock(){return this.query+=`    }
`,this}close(){return this.query+=`}
`,this}build(){return this.query}addFieldsFromParams(n){for(let[t,e]of Object.entries(n))e===!0&&this.addField(t);return this}addDeleteMutation(n,t){let e=Object.entries(t).map(([i,o])=>`${i}: "${o}"`).join(", ");return this.query+=`  ${n}(${e})
}
`,this}addMutation(n,t,e){return this.setRootType("mutation").addFieldWithArgs(n,t),e.forEach(i=>this.addField(i)),this.close(),this}};var X=(()=>{class r{constructor(){this.graphqlEndpoint=$.api_url}loadDoctorsSpecialtiesConsultingRooms(){return p(this,null,function*(){try{let e=new x().setRootType("query").openBlock("doctors").addField("id").openBlock("user").addField("id").addField("fullName").closeBlock().closeBlock().openBlock("specialities").addField("id").addField("name").closeBlock().openBlock("consultingRooms").addField("id").addField("roomName").closeBlock().close().build(),{errors:i,doctors:o,specialities:d,consultingRooms:c}=yield x.fetchQuery(e,this.graphqlEndpoint);return i?{isSuccess:!1,error:i[0].message}:{isSuccess:!0,value:{doctors:o,specialties:d,consultingRooms:c}}}catch(t){return{isSuccess:!1,error:t.message}}})}loadDoctorsSchedulesPatients(){return p(this,null,function*(){try{let e=new x().setRootType("query").openBlock("doctors").addField("id").openBlock("user").addField("id").addField("fullName").closeBlock().closeBlock().openBlock("specialities").addField("id").addField("name").closeBlock().openBlock("patients").addField("id").openBlock("user").addField("fullName").closeBlock().closeBlock().close().build(),{errors:i,doctors:o,specialities:d,patients:c}=yield x.fetchQuery(e,this.graphqlEndpoint);return i?{isSuccess:!1,error:i[0].message}:{isSuccess:!0,value:{doctors:o,specialties:d,patients:c}}}catch(t){return{isSuccess:!1,error:t.message}}})}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=k({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var S=class{constructor(){this.query=""}static fetchQuery(n,t){return p(this,null,function*(){let i=yield(yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})})).json();if(i.errors)throw new Error(`GraphQL Error: ${JSON.stringify(i.errors)}`);return i.data})}setRootType(n){return this.query+=`${n} {
`,this}addFieldWithArgs(n,t){let e=o=>typeof o=="string"?`"${o}"`:typeof o=="object"&&!Array.isArray(o)?`{ ${Object.entries(o).map(([d,c])=>`${d}: ${e(c)}`).join(", ")} }`:`${o}`,i=Object.entries(t).map(([o,d])=>`${o}: ${e(d)}`).join(", ");return this.query+=`  ${n}(${i}) {
`,this}addFunctionWithArgs(n,t){let e=o=>typeof o=="string"?`${o}`:typeof o=="object"&&!Array.isArray(o)?`{ ${Object.entries(o).map(([d,c])=>`${d}: ${e(c)}`).join(", ")} }`:`${o}`,i=Object.entries(t).map(([o,d])=>`${o}: ${e(d)}`).join(", ");return this.query+=`  ${n}(${i}) {
`,this}openBlock(n){return this.query+=`    ${n} {
`,this}addField(n){return this.query+=`      ${n}
`,this}closeBlock(){return this.query+=`    }
`,this}close(){return this.query+=`}
`,this}build(){return this.query}addFieldsFromParams(n){for(let[t,e]of Object.entries(n))e===!0&&this.addField(t);return this}addDeleteMutation(n,t){let e=Object.entries(t).map(([i,o])=>`${i}: "${o}"`).join(", ");return this.query+=`  ${n}(${e})
}
`,this}addMutation(n,t,e){return this.setRootType("mutation").addFieldWithArgs(n,t),e.forEach(i=>this.addField(i)),this.close(),this}};var K=(()=>{class r{constructor(){this.graphqlEndpoint=$.api_url}getItems(){return p(this,null,function*(){try{let e=new S().setRootType("query").openBlock("appointments").addField("appointmentDate").addField("id").addField("slotNumber").addField("status").openBlock("doctorShedule").addField("dayOfWeek").addField("endTime").openBlock("doctor").addField("code").addField("id").closeBlock().addField("id").addField("slotDuration").openBlock("speciality").addField("id").addField("name").closeBlock().addField("startTime").addField("status").addField("totalSlots").closeBlock().openBlock("patient").addField("id").addField("address").addField("phone").addField("birthdate").openBlock("user").addField("id").addField("fullName").addField("email").openBlock("roles").addField("id").addField("name").closeBlock().closeBlock().closeBlock().close().close().build(),{appointments:i,errors:o}=yield S.fetchQuery(e,this.graphqlEndpoint);return o?{isSuccess:!1,error:o[0].message}:{isSuccess:!0,value:i}}catch(t){return{isSuccess:!1,error:t.message}}})}createItem(t,e){return p(this,null,function*(){try{let o=new S().setRootType("mutation").addFieldWithArgs("createAppointment",{input:t}).addField("appointmentDate").addField("id").addField("slotNumber").addField("status").openBlock("doctorShedule").addField("dayOfWeek").addField("endTime").openBlock("doctor").addField("code").addField("id").closeBlock().addField("id").addField("slotDuration").openBlock("speciality").addField("id").addField("name").closeBlock().addField("startTime").addField("status").addField("totalSlots").closeBlock().close().build(),{createAppointment:d,errors:c}=yield S.fetchQuery(o,this.graphqlEndpoint);return c?{isSuccess:!1,error:c[0].message}:{isSuccess:!0,value:d}}catch(i){return{isSuccess:!1,error:i.message}}})}getByParams(t){return p(this,null,function*(){try{let i=new S().setRootType("query").addFieldWithArgs("appointments",{params:t}).addField("appointmentDate").addField("id").addField("slotNumber").openBlock("patient").addField("id").addField("address").addField("phone").addField("birthdate").openBlock("user").addField("id").addField("fullName").addField("email").openBlock("roles").addField("id").addField("name").closeBlock().closeBlock().closeBlock().addField("status").openBlock("doctorShedule").addField("dayOfWeek").addField("endTime").openBlock("doctor").addField("code").addField("id").openBlock("user").addField("id").addField("fullName").closeBlock().closeBlock().addField("id").addField("slotDuration").openBlock("speciality").addField("id").addField("name").closeBlock().addField("startTime").addField("status").addField("totalSlots").closeBlock().close().close().build(),{appointments:o,errors:d}=yield S.fetchQuery(i,this.graphqlEndpoint);return d?{isSuccess:!1,error:d[0].message}:{isSuccess:!0,value:o}}catch(e){return{isSuccess:!1,error:e.message}}})}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=k({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function re(r,n){}var U=(()=>{class r{constructor(){this.customQueriesService=v(X),this.cdr=v(L),this.dialogService=v(P),this.modalService=v(V),this.appointmentService=v(K),this.appointments=[],this.onShowItem=!1,this.detailListener={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:t=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.showAlert({description:"Estas seguro de realizar la modificacion?"}).subscribe(e=>{let{id:i,code:o,fullName:d,user_id:c,email:te}=t.value,se={code:o,user:{id:c,fullName:d,email:te}}})},delete:t=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.showAlert({description:"Estas seguro de realizar la eliminacion?"}).subscribe(e=>{})}}}ngOnInit(){let t=new Date().getDay();this.loadItemsLists(),this.loadItems({dayOfWeek:t})}loadItemsLists(){return p(this,null,function*(){let t=new q;this.dialogService.showLoading({description:"Cargando",listener:t});let e=localStorage.getItem("doctorId"),i=yield this.appointmentService.getByParams({doctorId:parseInt(e)});if(t.next(0),!i.isSuccess){this.dialogService.showError({description:i.error});return}this.appointments=i.value,this.cdr.detectChanges()})}onItemSelected(t){if(t.status!==0)return;let e=this.dcWrapper.viewContainerRef;e.clear();let i=e.createComponent(G);i.instance.appointment=t,this.onShowItem=!0}createAppoitment(t){return p(this,null,function*(){})}loadItems(t){return p(this,null,function*(){})}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=u({type:r,selectors:[["app-schedules"]],viewQuery:function(e,i){if(e&1&&A(j,5),e&2){let o;R(o=N())&&(i.dcWrapper=o.first)}},standalone:!0,features:[f],decls:5,vars:3,consts:[[3,"classList"],[3,"onItemSelected","appointments"],["dcWrapper",""]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",0),m(2,"app-schedules-header"),a(3,"app-schedule-list-items",1),w("onItemSelected",function(d){return i.onItemSelected(d)}),s()(),I(4,re,0,0,"ng-template",2),s()),e&2&&(b("classList",i.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),h(),b("classList",i.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),h(2),b("appointments",i.appointments))},dependencies:[y,H,z,j],encapsulation:2,changeDetection:0})}}return r})();var Y=(()=>{class r{static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=u({type:r,selectors:[["app-doctor"]],standalone:!0,features:[f],decls:1,vars:0,template:function(e,i){e&1&&m(0,"router-outlet")},dependencies:[y,C,Q],encapsulation:2,changeDetection:0})}}return r})();var Z=(()=>{class r{static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=u({type:r,selectors:[["app-create-consulting"]],standalone:!0,features:[f],decls:0,vars:0,template:function(e,i){},encapsulation:2})}}return r})();var ne=[{path:"",component:Y,children:[{path:"schedules",component:U},{component:Z,path:"create-consulting/:id"},{path:"",redirectTo:"schedules",pathMatch:"full"},{path:"**",redirectTo:"error/404"}]}],ee=(()=>{class r{static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275mod=D({type:r})}static{this.\u0275inj=B({imports:[C.forChild(ne),C]})}}return r})();var mt=(()=>{class r{static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275mod=D({type:r})}static{this.\u0275inj=B({imports:[ee]})}}return r})();export{mt as DoctorModule};
